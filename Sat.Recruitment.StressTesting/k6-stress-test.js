import http from 'k6/http'
import { sleep } from 'k6'

export let options = {
    insecureSkipTLSVerify: true,
    noConnectionReuse: false,
    stages: [
        /// increse by 100
        { duration: '2s', target: 100 },
        { duration: '2s', target: 100 },
        { duration: '2s', target: 200 },
        { duration: '2s', target: 200 },
        { duration: '2s', target: 300 },
        { duration: '2s', target: 300 },
        { duration: '2s', target: 400 },
        { duration: '2s', target: 400 },
        { duration: '2s', target: 500 },
        { duration: '2s', target: 500 },
        { duration: '2s', target: 600 },
        { duration: '2s', target: 600 },
        { duration: '2s', target: 700 },
        { duration: '2s', target: 700 },
        { duration: '2s', target: 800 },
        { duration: '2s', target: 800 },
        { duration: '2s', target: 900 },
        { duration: '2s', target: 900 },
        { duration: '2s', target: 1000 },
        { duration: '2s', target: 1000 },
        { duration: '2s', target: 1100 },
        { duration: '2s', target: 1100 },
        { duration: '2s', target: 1200 },
        { duration: '2s', target: 1200 },
        { duration: '2s', target: 1300 },
        { duration: '2s', target: 1300 },
        { duration: '2s', target: 1400 },
        { duration: '2s', target: 1400 },
        { duration: '2s', target: 1500 },
        { duration: '2s', target: 1500 },
        { duration: '2s', target: 1600 },
        { duration: '2s', target: 1600 },
        { duration: '2s', target: 1700 },
        { duration: '2s', target: 1700 },
        { duration: '2s', target: 1800 },
        { duration: '2s', target: 1800 },
        { duration: '2s', target: 1900 },
        { duration: '2s', target: 1900 },
        { duration: '2s', target: 2000 },
        { duration: '2s', target: 2000 },
        /// increse by 200
        { duration: '2s', target: 2200 },
        { duration: '2s', target: 2200 },
        { duration: '2s', target: 2400 },
        { duration: '2s', target: 2400 },
        { duration: '2s', target: 2600 },
        { duration: '2s', target: 2600 },
        { duration: '2s', target: 2800 },
        { duration: '2s', target: 2800 },
        { duration: '2s', target: 3000 },
        { duration: '2s', target: 3000 },
        /// increse by 300
        { duration: '2s', target: 3300 },
        { duration: '2s', target: 3300 },
        { duration: '2s', target: 3600 },
        { duration: '2s', target: 3600 },
        { duration: '2s', target: 3900 },
        { duration: '2s', target: 3900 },
        /// increse by 500
        { duration: '2s', target: 4500 },
        { duration: '2s', target: 4500 },
        { duration: '2s', target: 5000 },
        { duration: '2s', target: 5000 },
        { duration: '2s', target: 5500 },
        { duration: '2s', target: 5500 },
        { duration: '2s', target: 6000 },
        { duration: '2s', target: 6000 },
        { duration: '2s', target: 6500 },
        { duration: '2s', target: 6500 },
        { duration: '2s', target: 7000 },
        { duration: '2s', target: 7000 },
        { duration: '2s', target: 7500 },
        { duration: '2s', target: 7500 },
        { duration: '2s', target: 8000 },
        { duration: '2s', target: 8000 },
        { duration: '2s', target: 8500 },
        { duration: '2s', target: 8500 },
        { duration: '2s', target: 9000 },
        { duration: '2s', target: 9000 },
        { duration: '2s', target: 9500 },
        { duration: '2s', target: 9500 },
        { duration: '2s', target: 10000 },
        { duration: '2s', target: 10000 },
        /// increse by 1000
        { duration: '2s', target: 11000 },
        { duration: '2s', target: 11000 },
        { duration: '2s', target: 12000 },
        { duration: '2s', target: 12000 },
        { duration: '2s', target: 13000 },
        { duration: '2s', target: 13000 },
        { duration: '2s', target: 14000 },
        { duration: '2s', target: 14000 },
        { duration: '2s', target: 15000 },
        { duration: '2s', target: 15000 },
        { duration: '2s', target: 16000 },
        { duration: '2s', target: 17000 },
        { duration: '2s', target: 18000 },
        { duration: '2s', target: 18000 },
        { duration: '2s', target: 19000 },
        { duration: '2s', target: 19000 },
        { duration: '2s', target: 20000 },
        { duration: '2s', target: 20000 },
    ]
}

export default () => {
    const requestHeaders = {
        'X-ClientId': 'dev-id-2',
        'SatApiKey': 'let-me-pass',
    };

    http.get('https://localhost:7000/api/users/get-all?bypassCache=true', { headers: requestHeaders });
    sleep(1);
}